# SMB - Server Massage Block Protocol

SMB is a client-server communication protocol used for sharing access to files, printers, serial ports and other resources on a network.

Clients using TCP/IP. 
- Once they have established a connection.
- Clients: send command (SMBs) to the server; that allow them to access shares, open files, read and write files... over the **NETWORK**

Microsoft Windows OS have included client and server SMB protocol support. Samba is an open source that support for Unix system.

---
# Enumerating SMB

**Enumeration**
Is the process of gathering information on a target to find potential attack vectors and aid in (hỗ trợ) exploitation.

Enumeration can be used to gather usernames, passwords, network information, hostnames,... or any other information that may be valuable to an attacker.

**SMB**
SMB share drives on a server that can be connected to and used to view or transfer files. SMB can ofter be a great starting point for an attacker looking to discover sensitive information.

**Port Scanning**
The first step of enumeration is to conduct a port scan, to find out as much information as you can about the services, applications, structure and os of the targer machine.

**Enum4Linux**
Is a tool used to enumerate SMB shares on both Windows and Linux systems. 

*Syntax:* enum4linux [options]ip
*Some useful function:*
-U : get userlist
-M : get machine list
-S : get sharelist
-P : get password policy information
-G : get group and member list
-a : all of above

---
# Exploiting SMB
### Type of SMB exploit
The best way is encounter (bắt gặp) a misconfigurations in the system (cấu hình sai trong hệ thống). In this case, we're going to exploiting anonymous (ẩn danh) SMB share access - a common misconfiguration that can allow us to gain information that will lead to a shell.

### Method Breakdown
From the our enumeration stage, we know:
- The SMB share location
- The name of an interesting SMB share

### SMBClient
Because we're trying to access an SMB share, so we need to access resources on servers. We will be using SMBClient - a part of the default samba suit. 

*Syntax:* smbclient //[ip]/[share]
*Tags:*
-U[name] : to specify the user
-p[port] : to specify the port
